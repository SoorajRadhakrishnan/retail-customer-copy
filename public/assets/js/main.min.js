function notifyme2(e){""!=e&&($("#notifyTxt").html(e),$(".col-notify").delay("slow").fadeIn(),setTimeout(function(){$(".col-notify").delay("slow").fadeOut()},3e3))}function notifyme(e,t,o,n){""==e?$.notify(t,o,{position:n}):$(e).notify(t,o,{position:n})}function showProcessing(e,t){$("#"+e).append('<table class="col-xs-12 processing"><tr><td><img src="assets/img/loading.gif"><p class="text-center">'+t+"</p></td></tr></table>")}function showProcessing2(e,t){$("#"+e).append('<table class="col-xs-12 processing"><tr><td><p class="text-center">'+t+"</p></td></tr></table>")}function hideProcessing(){$(".processing").remove()}function closeModalRefreshTable(e){$("#"+e).DataTable().ajax.reload(),$(".modalClose").click()}function noresult(e,t){let o="It's empty here";1==e&&(o="Zero matches for your search.");let n='    <div class="col-12 mt-5">        <div class="col-md-4 mt-5 offset-md-4">        <div class="card rounded-10 shadow-0 border-0">            <div class="card-body border-0 text-center pt-5 pb-5 mt-5 mb-5">            <img src="assets/img/noresult.png" class=" img-fluid mb-3">            <h4 class="text-muted mb-0">'+o+"</h4>            </div>        </div>        </div>    </div>    ";$("#"+t).html(n)}function selSearchAjax(e,t,o){$("#"+e).select2({dropdownParent:$("#"+o),theme:"bootstrap-5",ajax:{url:window.location.origin+t,headers:{"Custom-Method":"select"},type:"post",dataType:"json",delay:250,data:function(e){return{searchTerm:e.term}},processResults:function(e){return{results:e}},cache:!0}})}function focustoid(e){setTimeout(function(){document.getElementById(e).focus()},500)}function newSale(){let e="/controller/sales.controller.php";$.ajax({type:"POST",url:window.location.origin+e,headers:{"Custom-Method":"newsale"},data:"",dataType:"JSON",cache:!1,contentType:!1,processData:!1,success:function(e){let t=JSON.parse(JSON.stringify(e));if(1==t.status){let e=t.returnaction;"redirect"==e&&(window.location.href=window.location.origin+t.redirect_to)}else notifyme2(t.message)},error:function(e){console.log("error"),console.log(e)}})}function decreasePercentage(e,t){if(isNaN(e)||isNaN(t))return"Invalid input. Please enter valid numbers.";var o=e*(100-t)/100;return o}function calculatePercentage(e,t){return t/100*e}function printit(e){let t='<iframe id="tr'+e+'" style="width: 100%; border: 0; height: 0" src="invoice.php?token='+e+'">';$("#if").html(t);let o=document.getElementById("tr"+e).contentWindow;o.focus(),o.print()}function printrec(e,t){let o='<iframe id="tr'+e+'" style="width: 100%; border: 0; height: 0" src="receipt.php?token='+e+"&type="+t+'">';$("#if").html(o);let n=document.getElementById("tr"+e).contentWindow;n.focus(),n.print()}function refreshTable(e){$("#"+e).DataTable().ajax.reload()}function clearSelect2(e){$("#"+e).val(null).trigger("change"),$("#clear"+e).hide()}function generatePass(e){let t="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$";for(let e=1;e<=8;e++){let e=Math.floor(Math.random()*o.length+1);t+=o.charAt(e)}$("#"+e).val(t)}function copyToClipboard(e){var t=document.getElementById(e),o=document.createRange();o.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(o);try{document.execCommand("copy"),notifyme2("Copied to Clipboard")}catch(e){console.error("Unable to copy to clipboard",e)}window.getSelection().removeAllRanges()}function readURL(e,t){if(e.files&&e.files[0]){var o=new FileReader;o.onload=function(e){$("#"+t).attr("src",e.target.result)},$("#"+t).show(),o.readAsDataURL(e.files[0])}else $("#"+t).hide()}function generateUsername(e){const t=e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase(),o=t.slice(0,12);return o}function showHidePassword(e,t){$("#"+e).hasClass("fa-eye")?($("#"+e).removeClass("fa-eye"),$("#"+e).addClass("fa-eye-slash"),$("#"+t).attr("type","text")):($("#"+e).removeClass("fa-eye-slash"),$("#"+e).addClass("fa-eye"),$("#"+t).attr("type","password"))}function changeBranch(e){let t=$("#"+e).val(),o="/controller/branches.controller.php?branch="+t;$.ajax({type:"POST",url:window.location.origin+o,headers:{"Custom-Method":"changeBranch"},data:"",dataType:"JSON",cache:!1,contentType:!1,processData:!1,success:function(e){let t=JSON.parse(JSON.stringify(e));t.status,location.reload()},error:function(e){console.log("error"),console.log(e)}})}$(document).ready(function(){$("body").append('<div class="col-notify"><div class="col-notify-in"><p id="notifyTxt"></p></div></div>')}),$(document).on("click",".dynamicPopup",function(e){e.preventDefault();let t=$(this).data("url");console.log(t);let o=$(this).data("pop");$(".popupContent-"+o).html('<center><p class="my-5">please wait</p></center>'),$.ajax({url:t,type:"GET",dataType:"html"}).done(function(e){$(".popupContent-"+o).html('<center><p class="my-5"><img src="assets/img/loading.gif"><br>please wait</p></center>'),$(".popupContent-"+o).html(e)}).fail(function(){$(".popupContent-"+o).html('<div class="modal-body text-center pt-5 pb-5"><h4 class="text-muted text-center mb-5">uh-oh<br>Something went wrong!</h4><button type="button" class="btn btn-danger px-4 text-uppercase text-white rounded-10 mr-2 modalClose" data-dismiss="modal">Close</button><button type="button" onclick="location.reload(true);" class="btn btn-primary px-4 rounded-10 text-uppercase text-white">RELOAD</button></div>')})}),$(document).on("click",".changeview",function(e){e.preventDefault();let t=$(this).data("changeto"),o="/controller/settings.controller.php?to="+t;$.ajax({type:"POST",url:window.location.origin+o,headers:{"Custom-Method":"viewchange"},data:"",dataType:"JSON",cache:!1,contentType:!1,processData:!1,success:function(e){let t=JSON.parse(JSON.stringify(e));1==t.status&&(notifyme2(t.message),location.reload())},error:function(e){console.log("error"),console.log(e)}})}),$(document).on("click",".submitForm",function(e){e.preventDefault();let t=$(this).data("method"),o=$(this).data("form"),n=$(this).data("target"),a=$(this).data("returnaction"),s=$(this).data("processing"),r=$(this).data("reset");""==s?showProcessing2(o,s):showProcessing(o,s);let c=new FormData(document.getElementById(o));$.ajax({type:"POST",url:window.location.origin+n,headers:{"Custom-Method":t},data:c,dataType:"JSON",cache:!1,contentType:!1,processData:!1,success:function(e){let t=JSON.parse(JSON.stringify(e));if(1==t.status)notifyme2(t.message),"reload"==a?setTimeout(function(){location.reload()},1e3):"nothing"==a?(console.log("saved"),hideProcessing()):"getItems"==a?($(".modalClose").click(),hideProcessing(),getItems()):"getval"==a?($(".modalClose").click(),hideProcessing(),"customerForm"==o&&addCustomer(t.returnthis)):"redirect"==a?setTimeout(function(){window.location.href=window.location.origin+t.redirect_to},1e3):1==r?($("#"+o).trigger("reset"),hideProcessing()):(hideProcessing(),closeModalRefreshTable(a));else{hideProcessing(),notifyme2(t.message);let e=t.response;for(let t in e)e.hasOwnProperty(t)&&(""!=e[t].id&&$("#"+e[t].id).focus().select(),""!=e[t].message&&notifyme("#"+e[t].id,e[t].message,"error","bottom"))}},error:function(e){console.log("error"),console.log(e)}})}),$(function(){$('[data-toggle="popover"]').popover()}),document.onkeyup=function(e){e.preventDefault(),e.altKey&&78==e.which&&$("#createbtn").click(),e.ctrlKey&&e.altKey&&70==e.which&&$("#searchNav").focus(),e.altKey&&83==e.which&&newSale()},$(document).on("click",".newsale",function(e){e.preventDefault(),newSale()});